# Reciprocal Rank Fusion
## 算法应用
RRF是一种将多种排序结果进行融合的算法。常应用场景：从知识库通过向量查询和关键词查询，得到两种排序结果。使用RRF算法计算综合评分。

## 算法原理
$$RRFscore(d \in D) = \sum_{r \in R}\frac{1}{k+r(d)}$$ 

其中，D是文档集，r(d)表示子文档d在某个排序r中的排名（越靠前，排名越小，分值汇总越高）。k是调和参数，控制不同排序序列的权重。k越小​​，排名靠前的文档得分越高，该查询的​​影响力越大​​。

## 示例
假设你和三个朋友在寻找一本丢失的书，每个人列出了最有可能找到书的地点，并按从高到低的顺序进行排序。RRF 就是结合这些排序结果，帮助找到最有可能的地点。

### 列表数据
朋友A的列表：
  1. 书架
  2. 桌子
  3. 床下
  
朋友B的列表：
  1. 床下
  2. 书架
  3. 桌子

朋友C的列表：
  1. 桌子
  2. 书架
  3. 床下

### RRF计算过程
我们为每个地点计算在每个列表中的排名倒数，然后将这些倒数相加，得到融合分数。
1. 书架
  - 在朋友A的列表中排名第1：$\frac{1}{1}$ = 1
  - 在朋友B的列表中排名第2：$\frac{1}{2}$ = 0.5
  - 在朋友C的列表中排名第3：$\frac{1}{2}$ = 0.5
  - 总分：1+0.5+0.5=2
2. 床下
  - 总分：0.33+1+0.33=1.66
3. 桌子
  - 总分：0.5+0.33+1=1.83

### 排序结果
最后，我们根据每个地点的融合分数排序：
书架: 2
桌子: 1.83
床下: 1.66
因此，书架是最有可能找到书的地点。
